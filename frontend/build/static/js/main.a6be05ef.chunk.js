(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(0),c=a(17),s=a.n(c),o=(a(105),a(106),a.p+"static/media/logo.6ce24c58.svg"),i=a(227),l=a(221),d=a(222),u=a(92),j=a(8),p=a.n(j),b=a(21),h="USER_REGISTER_REQUEST",O="USER_REGISTER_SUCCESS",g="USER_REGISTER_FAIL",m="USER_LOGIN_REQUEST",f="USER_LOGIN_SUCCESS",x="USER_LOGIN_FAIL",v="USER_LOGOUT",y=a(22),S=a.n(y),E=a(10),w=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.userLogin})).userInfo;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("header",{children:Object(n.jsx)(i.a,{bg:"dark",variant:"dark",children:Object(n.jsxs)(l.a,{children:[Object(n.jsx)(u.LinkContainer,{to:"/",children:Object(n.jsxs)(i.a.Brand,{children:[Object(n.jsx)("img",{alt:"",src:o,width:"50",height:"50",className:"d-inline-block"})," ","Photogram"]})}),Object(n.jsx)(i.a.Toggle,{}),t?Object(n.jsxs)(i.a.Collapse,{className:"justify-content-around",children:[Object(n.jsxs)(i.a.Text,{children:["Signed in as: ","".concat(t.email)]}),Object(n.jsx)(i.a.Text,{children:Object(n.jsx)(d.a,{onClick:function(){e((function(e){localStorage.removeItem("photpAppLoginUser"),e({type:v}),document.location.href="/login"}))},children:"Logout"})})]}):""]})})})})},I=a(16),L=a(7),U=a(43),R=a(13),_="USER_IMAGES_REQUEST",C="USER_IMAGES_SUCCESS",N="USER_IMAGES_FAIL",A="USER_IMAGES_UPLOAD_REQUEST",k="USER_IMAGES_UPLOAD_SUCCESS",T="USER_IMAGES_UPLOAD_FAIL",G=a(224),F=a(97),P=a(226),D=a(225),M=a(223),J=function(){return Object(n.jsx)(M.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})},B=a(228),Q=function(e){var t=e.variant,a=e.children;return Object(n.jsx)(B.a,{variant:t,style:{width:"100%"},children:a})};Q.defaultProps={variant:"info"};var H=Q,W=(a(218),a(44)),q=function(e){var t=e.history,a=Object(r.useState)("Select an image to upload..."),c=Object(R.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)(""),l=Object(R.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)(null),O=Object(R.a)(h,2),g=O[0],m=O[1],f=Object(r.useState)(""),x=Object(R.a)(f,2),v=x[0],y=x[1],w=Object(E.b)(),L=Object(E.c)((function(e){return e.imageList})),A=L.loading,k=L.images,T=L.error,M=Object(E.c)((function(e){return e.userLogin})).userInfo;Object(r.useEffect)((function(){M&&(console.log("===================================="),console.log(M),console.log("===================================="),w((M._id,function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r,c,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:_}),n=a(),r=n.userLogin.userInfo,e.next=5,S.a.get("/api/getimages",{params:{userid:r._id,isAdmin:r.isAdmin}});case 5:c=e.sent,s=c.data,(o=s.images).sort((function(e,t){return new Date(e.created).getTime()-new Date(t.created).getTime()})),o.reverse(),t({type:C,payload:o}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t({type:N,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}())))}),[w,t,v]);var B=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=g,(n=new FormData).append("image",a),n.append("userid",M._id),e.prev=5,r={headers:{"content-type":"multipart/form-data"}},e.next=9,S.a.post("/api/upload",n,r).then((function(e){console.log(e.data),y(e.data),j(""),o("Select an image to upload..."),m(null)})).catch((function(e){e&&e.response&&void 0!==e.response.data.Error?j(e.response.data.Error):j("Images only!")}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files[0]&&(o(t.target.files[0].name),m(t.target.files[0]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[!M&&Object(n.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:["Please \xa0",Object(n.jsx)(I.Link,{to:"/login",children:"sign in"}),"\xa0to see your stuff!"]}),M&&Object(n.jsx)(G.a,{children:Object(n.jsx)(F.a,{children:Object(n.jsx)(P.a,{encType:"multipart/form-data",onSubmit:B,children:Object(n.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(n.jsxs)("div",{className:"d-flex w-100",children:[Object(n.jsx)("div",{className:"input-group",children:Object(n.jsx)(P.a.File,Object(U.a)({id:"custom-file",label:s,custom:!0,className:"w-80",onChange:Q},"className","w-50"))}),"\xa0\xa0\xa0\xa0",Object(n.jsx)("div",{children:Object(n.jsx)(d.a,{variant:"outline",className:"btn-outline-primary w-20",type:"submit",children:Object(n.jsx)("i",{className:"fa fa-upload","aria-label":"upload",alt:"upload"})})})]}),Object(n.jsx)("div",{className:"mt-3",children:""!==u?Object(n.jsx)(H,{variant:"danger",children:u}):""})]})})})}),M&&Object(n.jsx)(G.a,{className:"py-3 px-4",children:A?Object(n.jsx)(J,{}):T?Object(n.jsx)(H,{variant:"danger",children:T}):0===k.length?Object(n.jsx)(H,{variant:"danger",children:"No Images found"}):k.map((function(e){return Object(n.jsx)(F.a,{sm:12,md:6,lg:4,xl:3,className:"py-2",children:Object(n.jsx)(W.a,{children:Object(n.jsx)(D.a,{src:e.imageURL,thumbnail:!0,fluid:!0,className:"img-fluid"})})},e.imageURL)}))})]})},z=function(e){var t=e.children;return Object(n.jsx)(l.a,{children:Object(n.jsx)(G.a,{className:"justify-content-md-center",children:Object(n.jsx)(F.a,{xs:12,md:6,children:t})})})},K=function(e){var t=e.location,a=e.history,c=Object(r.useState)(""),s=Object(R.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),u=Object(R.a)(l,2),j=u[0],h=u[1],O=Object(E.b)(),g=Object(E.c)((function(e){return e.userLogin})),v=g.loading,y=g.error,w=g.userInfo,L=t.search?t.search.split("=")[1]:"/";Object(r.useEffect)((function(){w&&a.push(L)}),[a,w,L]);return Object(n.jsxs)(z,{children:[Object(n.jsx)("h1",{children:"Sign In"}),y&&Object(n.jsx)(H,{variant:"danger",children:y}),v&&Object(n.jsx)(J,{}),Object(n.jsxs)(P.a,{onSubmit:function(e){e.preventDefault(),O(function(e,t){return function(){var a=Object(b.a)(p.a.mark((function a(n){var r,c,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),r={headers:{"Content-Type":"application/json"}},a.next=5,S.a.post("/users/login",{email:e,password:t},r);case 5:c=a.sent,s=c.data,n({type:f,payload:s}),localStorage.setItem("photpAppLoginUser",JSON.stringify(s)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:x,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(o,j))},children:[Object(n.jsxs)(P.a.Group,{controlId:"email",children:[Object(n.jsx)(P.a.Label,{children:"Email Address"}),Object(n.jsx)(P.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(n.jsxs)(P.a.Group,{controlId:"password",children:[Object(n.jsx)(P.a.Label,{children:"Password"}),Object(n.jsx)(P.a.Control,{type:"password",placeholder:"Enter password",value:j,onChange:function(e){return h(e.target.value)}})]}),Object(n.jsx)(d.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(n.jsx)(G.a,{className:"py-3",children:Object(n.jsxs)(F.a,{children:["New Customer?"," ",Object(n.jsx)(I.Link,{to:L?"/register?redirect=".concat(L):"/register",children:"Register"})]})})]})},V=function(e){var t=e.location,a=e.history,c=Object(r.useState)(""),s=Object(R.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),u=Object(R.a)(l,2),j=u[0],m=u[1],x=Object(r.useState)(""),v=Object(R.a)(x,2),y=v[0],w=v[1],L=Object(r.useState)(null),U=Object(R.a)(L,2),_=U[0],C=U[1],N=Object(E.b)(),A=Object(E.c)((function(e){return e.userRegister})),k=A.loading,T=A.error,D=A.userInfo,M=t.search?t.search.split("=")[1]:"/";Object(r.useEffect)((function(){D&&a.push(M)}),[a,D,M]);return Object(n.jsxs)(z,{children:[Object(n.jsx)("h1",{children:"Sign Up"}),_&&Object(n.jsx)(H,{variant:"danger",children:_}),T&&Object(n.jsx)(H,{variant:"danger",children:T}),k&&Object(n.jsx)(J,{}),Object(n.jsxs)(P.a,{onSubmit:function(e){e.preventDefault(),j!==y?C("Passwords do not match"):N(function(e,t){return function(){var a=Object(b.a)(p.a.mark((function a(n){var r,c,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:h}),r={headers:{"Content-Type":"application/json"}},a.next=5,S.a.post("/users/create",{email:e,password:t},r);case 5:c=a.sent,s=c.data,n({type:O,payload:s}),n({type:f,payload:s}),localStorage.setItem("photpAppLoginUser",JSON.stringify(s)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),n({type:g,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(o,j))},children:[Object(n.jsxs)(P.a.Group,{controlId:"email",children:[Object(n.jsx)(P.a.Label,{children:"Email Address"}),Object(n.jsx)(P.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(n.jsxs)(P.a.Group,{controlId:"password",children:[Object(n.jsx)(P.a.Label,{children:"Password"}),Object(n.jsx)(P.a.Control,{type:"password",placeholder:"Enter password",value:j,onChange:function(e){return m(e.target.value)}})]}),Object(n.jsxs)(P.a.Group,{controlId:"confirmPassword",children:[Object(n.jsx)(P.a.Label,{children:"Confirm Password"}),Object(n.jsx)(P.a.Control,{type:"password",placeholder:"Confirm password",value:y,onChange:function(e){return w(e.target.value)}})]}),Object(n.jsx)(d.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(n.jsx)(G.a,{className:"py-3",children:Object(n.jsxs)(F.a,{children:["Have an Account?"," ",Object(n.jsx)(I.Link,{to:M?"/login?redirect=".concat(M):"/login",children:"Login"})]})})]})};var X=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(I.BrowserRouter,{children:[Object(n.jsx)(w,{}),Object(n.jsx)("main",{className:"py-3",children:Object(n.jsxs)(l.a,{children:[Object(n.jsx)(L.d,{path:"/",component:q,exact:!0}),Object(n.jsx)(L.d,{path:"/login",component:K,exact:!0}),Object(n.jsx)(L.d,{path:"/register",component:V,exact:!0})]})})]})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,229)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},Z=a(25),$=a(98),ee=a(99),te=a(14),ae=Object(Z.combineReducers)({imageList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{images:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(te.a)(Object(te.a)({},e),{},{loading:!0});case C:return Object(te.a)(Object(te.a)({},e),{},{loading:!1,images:t.payload});case N:return Object(te.a)(Object(te.a)({},e),{},{loading:!1,error:t.payload});default:return e}},imageUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{image:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(te.a)(Object(te.a)({},e),{},{loading:!0});case k:return Object(te.a)(Object(te.a)({},e),{},{loading:!1,image:t.payload});case T:return Object(te.a)(Object(te.a)({},e),{},{loading:!1,error:t.payload});default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{loading:!0};case f:return{loading:!1,userInfo:t.payload};case x:return{loading:!1,error:t.payload};case v:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{loading:!0};case O:return{loading:!1,userInfo:t.payload};case g:return{loading:!1,error:t.payload};case v:return{};default:return e}}}),ne={userLogin:{userInfo:localStorage.getItem("photpAppLoginUser")?JSON.parse(localStorage.getItem("photpAppLoginUser")):null}},re=[$.a],ce=Object(Z.createStore)(ae,ne,Object(ee.composeWithDevTools)(Z.applyMiddleware.apply(void 0,re)));s.a.render(Object(n.jsx)(E.a,{store:ce,children:Object(n.jsx)(W.b,{children:Object(n.jsx)(X,{})})}),document.getElementById("root")),Y()}},[[217,1,2]]]);
//# sourceMappingURL=main.a6be05ef.chunk.js.map